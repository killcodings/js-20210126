<!doctype html>
<meta charset="utf-8">

<input id="fileInput" type="file">
<button id="turtle" data-hide="#turtle">Turtle</button>

<script type="module">
  import ImageUploader from './index.js';

  turtle.addEventListener('click', event => {
      const { hide: hideSelector } = event.target.dataset;
      // const { hide: hideSelector } = { hide: '#turtle' };
      console.log(event.target.dataset);
  });

  fileInput.onchange = upload;

  async function upload() {
    let uploader = new ImageUploader();

    alert('Загружаем...');

    let result;

    try {
      const [file] = fileInput.files;
      result = await uploader.upload(file);

      alert('Изображение загружено');
    } catch(err) {
      alert('Ошибка загрузки изображения');
      console.error(err);
    } finally {
      alert('Готово!')
    }

    console.log(result);
  }
</script>
